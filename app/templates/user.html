<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}
    <table>
        <tr valign="top">
            <td><img src="{{ user.avatar(128) }}"></td>
            <td><h1>User: {{ user.nickname }}</h1>
                <p>Email: <a href="mailto: {{ user.email }}">{{ user.email }}</a></p>
                {% if user.about_me %}<p>{{ user.about_me }}</p>{% endif %}
                {% if user.last_seen %}<p><i>{{ user.last_seen }}</i></p>{% endif %}
                {% if user.id == g.user.id %}
                    <p><a href="{{ url_for('edit') }}">Edit Profile</a></p>
                {% elif not g.user.is_following(user) %}
                    <p><a href="{{ url_for('follow', nickname=user.nickname) }}">Follow</a></p>
                {% else %}
                    <p><a href="{{ url_for('unfollow', nickname=user.nickname) }}">Unfollow</a></p>
                {% endif %}
            </td>
        </tr>
    </table>
    <hr>
    <h1>Following...</h1>
    {% for u in following %}
        {% if u.id != user.id %}
        <div><p><img src="{{ u.avatar(40) }}">
            <a href="{{ url_for('user', nickname=u.nickname) }}">{{ u.nickname }}</a></p></div>
        {% endif %}
    {% endfor %}
    <h1>Followed by...</h1>
    {% for u in followers %}
        {% if u.id != user.id %}
        <div><p><img src="{{ u.avatar(40) }}">
            <a href="{{ url_for('user', nickname=u.nickname) }}">{{ u.nickname }}</a></p></div>
        {% endif %}
    {% endfor %}
    <hr>
    {% for post in posts.items %}
        {% include 'post.html' %}
    {% endfor %}
    {% if posts.has_prev %}<a href="{{ url_for('user', nickname=user.nickname, page=posts.prev_num) }}">&lt;&lt; Newer</a>
    {% else %}&lt;&lt; Newer{% endif %} |
    {% if posts.has_next %}<a href="{{ url_for('user', nickname=user.nickname, page=posts.next_num) }}">Older &gt;&gt;</a>
    {% else %}Older &gt;&gt;{% endif %}
{% endblock %}